{"ast":null,"code":"// src/components/AuthForm.js\nimport React,{useState}from'react';import api from'../api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthForm=_ref=>{let{isRegister}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[name,setName]=useState('');const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();const payload=isRegister?{name,email,password}:{email,password};try{const endpoint=isRegister?'/auth/register':'/auth/login';const response=await api.post(endpoint,payload);if(response.data.token){localStorage.setItem('token',response.data.token);if(isRegister){setSuccessMessage('Registro completo');setTimeout(()=>{navigate('/');// Redirige a la página de inicio de sesión\n},2000);}else{navigate('/courses');// Redirige a la página de cursos\n}}}catch(err){setError(isRegister?'Error al registrarse':'Error al iniciar sesión');}};const handleRegisterRedirect=()=>{navigate('/register');};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isRegister?'Registrar usuario':'Iniciar sesión'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[isRegister&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contrase\\xF1a:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:successMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isRegister?'Registrar':'Iniciar sesión'})]}),!isRegister&&/*#__PURE__*/_jsxs(\"div\",{className:\"register-link\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No tienes cuenta?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegisterRedirect,children:\"Registrarse\"})]})]})});};export default AuthForm;","map":{"version":3,"names":["React","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","AuthForm","_ref","isRegister","email","setEmail","password","setPassword","name","setName","error","setError","successMessage","setSuccessMessage","navigate","handleSubmit","e","preventDefault","payload","endpoint","response","post","data","token","localStorage","setItem","setTimeout","err","handleRegisterRedirect","className","children","onSubmit","type","value","onChange","target","required","onClick"],"sources":["C:/Users/Gabriel/Desktop/PrograWeb/Sistema-de-Cursos-de-Extensi-n/frontend/src/components/AuthForm.js"],"sourcesContent":["// src/components/AuthForm.js\nimport React, { useState } from 'react';\nimport api from '../api';\nimport { useNavigate } from 'react-router-dom';\n\nconst AuthForm = ({ isRegister }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const payload = isRegister\n      ? { name, email, password }\n      : { email, password };\n\n    try {\n      const endpoint = isRegister ? '/auth/register' : '/auth/login';\n      const response = await api.post(endpoint, payload);\n\n      if (response.data.token) {\n        localStorage.setItem('token', response.data.token);\n\n        if (isRegister) {\n          setSuccessMessage('Registro completo');\n          setTimeout(() => {\n            navigate('/'); // Redirige a la página de inicio de sesión\n          }, 2000);\n        } else {\n          navigate('/courses'); // Redirige a la página de cursos\n        }\n      }\n    } catch (err) {\n      setError(isRegister ? 'Error al registrarse' : 'Error al iniciar sesión');\n    }\n  };\n\n  const handleRegisterRedirect = () => {\n    navigate('/register');\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"auth-form\">\n        <h2>{isRegister ? 'Registrar usuario' : 'Iniciar sesión'}</h2>\n        <form onSubmit={handleSubmit}>\n          {isRegister && (\n            <div>\n              <label>Nombre:</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required\n              />\n            </div>\n          )}\n          <div>\n            <label>Email:</label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n          <div>\n            <label>Contraseña:</label>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n          {error && <p className=\"error\">{error}</p>}\n          {successMessage && <p className=\"success\">{successMessage}</p>}\n          <button type=\"submit\">{isRegister ? 'Registrar' : 'Iniciar sesión'}</button>\n        </form>\n\n        {!isRegister && (\n          <div className=\"register-link\">\n            <p>No tienes cuenta?</p>\n            <button onClick={handleRegisterRedirect}>Registrarse</button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AuthForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}